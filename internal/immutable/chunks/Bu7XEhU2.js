var Va=Object.defineProperty;var mr=t=>{throw TypeError(t)};var Qa=(t,e,n)=>e in t?Va(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>Qa(t,typeof e!="symbol"?e+"":e,n),yn=(t,e,n)=>e.has(t)||mr("Cannot "+n);var Et=(t,e,n)=>(yn(t,e,"read from private field"),n?n.call(t):e.get(t)),ge=(t,e,n)=>e.has(t)?mr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),wn=(t,e,n,r)=>(yn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),vr=(t,e,n)=>(yn(t,e,"access private method"),n);import{t as ot,a as at,b as Ya}from"./DPod6QIp.js";import"./DPKZsrJd.js";import{a1 as Wa,g as ja,t as Kt,aN as Fr,v as Rt,w as Zt,p as j,x as W,q as Q,n as Hr,aK as mt,aL as Dn,j as _,G as H,H as N,k as Ue,s as ne,J as Ur,I as Gr,aR as Ka}from"./BFObrsv1.js";import{e as Ye,s as Pe,g as Za}from"./CRZEWfnX.js";import{p as zt,i as Qt,g as ee,d as Xt,b as Ja,a as Xr}from"./COzHAEHv.js";import{i as se,b as ts,m as Vr,s as Yt,j as es,e as Sn,L as ns,B as rs,D as is,I as as,d as xn,C as ss,N as Qr,k as os,l as us,h as ls,n as Yr,o as cs,q as fs,r as hs,f as ds,t as gs}from"./BT6r-Kje.js";import{i as le}from"./Doh_rp3Y.js";import{s as ps,g as ms}from"./Rt83Blcm.js";import{c as Wr,w as vt,o as vs,a as _s}from"./Cgct2SGl.js";import{s as ys}from"./D3uHzskZ.js";import{s as jr}from"./CN3ymqL5.js";import{_ as _r}from"./C1FmrZbK.js";var Dt,ae,Te,an,Kr;const sn=class sn{constructor(e){ge(this,an);ge(this,Dt,new WeakMap);ge(this,ae);ge(this,Te);wn(this,Te,e)}observe(e,n){var r=Et(this,Dt).get(e)||new Set;return r.add(n),Et(this,Dt).set(e,r),vr(this,an,Kr).call(this).observe(e,Et(this,Te)),()=>{var i=Et(this,Dt).get(e);i.delete(n),i.size===0&&(Et(this,Dt).delete(e),Et(this,ae).unobserve(e))}}};Dt=new WeakMap,ae=new WeakMap,Te=new WeakMap,an=new WeakSet,Kr=function(){return Et(this,ae)??wn(this,ae,new ResizeObserver(e=>{for(var n of e){sn.entries.set(n.target,n);for(var r of Et(this,Dt).get(n.target)||[])r(n)}}))},lt(sn,"entries",new WeakMap);let En=sn;var ws=new En({box:"border-box"});function yr(t,e,n){var r=ws.observe(t,()=>n(t[e]));Wa(()=>(ja(()=>n(t[e])),r))}const xs=()=>{const t=ps;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},bs={subscribe(t){return xs().page.subscribe(t)}},Rn=t=>{var e,n;return t.mode==="wdqs"&&t.wdqs!==void 0&&((e=t.wdqs)==null?void 0:e.length)>0||((n=t.language)==null?void 0:n.length)>0&&t.item!==void 0&&t.property!==void 0},$s=t=>t.charAt(0).toUpperCase()+t.slice(1),Zr=t=>t.limit!==0||t.iterations!==0||t.mode==="undirected",We=(t,e=t.mode)=>e==="both"?`{ ${We(t,"forward")} } UNION { ${We(t,"reverse")} }`:Zr(t)?`SERVICE gas:service {
    gas:program gas:gasClass "com.bigdata.rdf.graph.analytics.SSSP" ;
                gas:in wd:${t.item} ;
                gas:traversalDirection "${$s(e)}" ;
                gas:out ?item ;
                gas:out1 ?depth ;${t.iterations?`
                gas:maxIterations ${t.iterations} ;`:""}${t.limit?`
                gas:maxVisited ${t.limit} ;`:""}
                gas:linkType wdt:${t.property} .
  }`:e==="forward"?`wd:${t.item} wdt:${t.property}* ?item`:e==="reverse"?`?item wdt:${t.property}* wd:${t.item}`:"",Jr=t=>{var i;if(!t||!Rn(t))return;if(t.mode==="wdqs")return t.wdqs;if(!t.item||!t.property)return;const e=Zr(t)?`PREFIX gas: <http://www.bigdata.com/rdf/gas#>

`:"",r=`SERVICE wikibase:label {bd:serviceParam wikibase:language "${t.language==="en"?"en,mul":t.language+",mul,en"}" }`;if((i=t.special)!=null&&i.instanceOrSubclass){const s=[];return(t.mode==="forward"||t.mode==="both")&&s.push(`				{
					BIND(wd:${t.item} AS ?item)
					OPTIONAL { ?item wdt:P31 ?linkTo BIND("instance" AS ?linkType) }
				}
				UNION
				{
					wd:${t.item} wdt:P279* ?item
					OPTIONAL { ?item wdt:P279 ?linkTo }
				}
				UNION
				{
					wd:${t.item} wdt:P31 ?instance .
					?instance wdt:P279* ?item .
					OPTIONAL { ?item wdt:P279 ?linkTo }
				}				`),(t.mode==="reverse"||t.mode==="both")&&s.push(`				{
					?item wdt:P279* wd:${t.item}
					OPTIONAL { ?item wdt:P279 ?linkTo }
				}
				UNION
				{
					?class wdt:P279* wd:${t.item} .
					?item wdt:P31 ?class .
					OPTIONAL { ?item wdt:P31 ?linkTo BIND("instance" AS ?linkType) }
				}				`),`			SELECT DISTINCT ?item ?itemLabel ?linkTo ?linkType {
				${s.join(`
UNION
`)}
				${r}
			}			`}return t.sizeProperty?e+`  SELECT ?item ?itemLabel ?linkTo ?size {
    { SELECT ?item (count(distinct ?element) as ?size) {
    ${We(t)}
    OPTIONAL { ?element wdt:${t.sizeProperty} ?item }
    } GROUP BY ?item }
    OPTIONAL { ?item wdt:${t.property} ?linkTo }
    ${r}
  }  `:e+`SELECT ?item ?itemLabel ?linkTo {
${We(t)}
OPTIONAL { ?item wdt:${t.property} ?linkTo }
${r}
}`},qn="en",ti=0,ei=0,Bn="forward",ni="preserve",ri="#000000",ii=1,ai="none",si={forward:"Forward",reverse:"Reverse",both:"Bidirectional",undirected:"Undirected",wdqs:"SPARQL query"},oi={preserve:"Preserve",remove:"Remove",relax:"Relax"},ui={none:"Force-directed",down:"Top to bottom",up:"Bottom to top",right:"Left to right",left:"Right to left"},wr=(t=new URLSearchParams)=>{const e=/^P\d+$/.test(t.get("property")??"")?t.get("property"):void 0,n=/^Q\d+$/.test(t.get("item")??"")?t.get("item"):void 0,r=/^[a-z-]{2,}$/.test(t.get("lang")??"")?t.get("lang"):qn,i=/^\d+$/.test(t.get("iterations")??"")?Number.parseInt(t.get("iterations"),10):ti,s=/^\d+$/.test(t.get("limit")??"")?Number.parseInt(t.get("limit"),10):ei,o=t.get("instance_or_subclass")==="1",u=t.get("mode")??t.get("direction"),c=u&&si[u]?u:Bn,h=t.get("wdqs")??void 0,f=/^P\d+$/.test(t.get("size_property")??"")?t.get("size_property"):void 0,m={property:e,item:n,language:r,iterations:i,limit:s,mode:c,wdqs:h,sizeProperty:f,special:{instanceOrSubclass:o}},p=t.get("sc"),y=oi[p]?p:ni,E=/^#[\da-fA-F]{6}|#[\da-fA-F]{8}$/.test(t.get("sc_color")??"")?t.get("sc_color"):ri,P=/^\d+$/.test(t.get("sc_width")??"")?Number.parseInt(t.get("sc_width"),10):ii,R=t.get("graph_direction"),b=ui[R]?R:ai;return{queryParameters:m,visParameters:{shortcutsMode:y,shortcutsColor:E,shortcutsWidth:P,graphDirection:b}}},xr=async(t,e,n)=>{var i;const r=new URLSearchParams;t.item&&r.append("item",t.item),t.property&&r.append("property",t.property),t.mode!==Bn&&r.append("mode",t.mode),t.limit!==void 0&&t.limit!==ei&&r.append("limit",t.limit.toString()),t.iterations!==void 0&&t.iterations!==ti&&r.append("iterations",t.iterations.toString()),t.language!==qn&&r.append("lang",t.language),t.wdqs&&t.mode==="wdqs"&&r.append("wdqs",t.wdqs),t.sizeProperty&&r.append("size_property",t.sizeProperty),e.shortcutsMode!==ni&&r.append("sc",e.shortcutsMode),e.shortcutsColor!==ri&&r.append("sc_color",e.shortcutsColor),e.shortcutsWidth!==ii&&r.append("sc_width",e.shortcutsWidth.toString()),e.graphDirection!==ai&&r.append("graph_direction",e.graphDirection),(i=t.special)!=null&&i.instanceOrSubclass&&r.append("instance_or_subclass","1"),await ms("?"+r.toString(),{replaceState:n})},Ts=function(t){const e=`#defaultView:Graph
`+Jr(t);return"https://query.wikidata.org/#"+encodeURIComponent(e)},Ps=t=>{let e="https://tools.wmflabs.org/wikidata-todo/tree.html?q="+t.item.slice(1);return(t.mode==="reverse"||t.mode==="both")&&(e+="&rp="+t.property.slice(1)),(t.mode==="forward"||t.mode==="both")&&(e+="&p="+t.property.slice(1)),t.iterations!==0&&(e+=`&depth=${t.iterations??0}`),t.language!=="en"&&(e+=`&lang=${t.language??"en"}`),e},Ss=t=>{if(!Rn(t))return[];const e=[{text:"Wikidata Query Service",link:Ts(t)}];return(t.mode==="forward"||t.mode==="reverse")&&e.push({text:"Wikidata generic tree",link:Ps(t)}),e};var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Es(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var As=ot('<div><label class="px-1 border-transparent border-[1.99px] text-sm text-white/50 mb-0.5 font-bold"> </label> <!></div>');function Gt(t,e){Kt(e,!1);const n=Vr(10);let r=zt(e,"label",8),i=zt(e,"class",8,"");const s=f=>{var p;const m=(p=document.activeElement)==null?void 0:p.id;(m===n||m==="field-"+n)&&f.preventDefault()};Fr("field",{id:n}),le();var o=As(),u=j(o);se(u,"for",n),se(u,"id",`label-${n??""}`);var c=j(u,!0);Q(u);var h=W(u,2);return ys(h,e,"default",{},null),Q(o),Rt(()=>{Yt(o,1,es(i())),Pe(c,r())}),Ye("mousedown",u,s),at(t,o),ts(e,"id",n),Zt({id:n})}var Cs=ot("<div><!></div>");function Ns(t,e){let n=zt(e,"class",3,"");var r=Cs(),i=j(r);jr(i,()=>e.children??Hr),Q(r),Rt(()=>Yt(r,1,`border-x-[1.99px] border-transparent px-1 ${n()??""}`)),at(t,r)}var zs=ot("<!> <!>",1),Is=ot("<!> <!> <!> <!>",1),Os=ot("<!> <!>",1),ks=ot('<div class="space-y-2"><div class="flex gap-2"><!> <!></div> <!> <!></div>');function Ms(t,e){Kt(e,!1);const n=H(),r=H(),i=H();let s=zt(e,"appParameters",8),o=H(),u=H(),c=H(),h=H(),f=H(qn),m=H(),p=H(),y=H(Bn),E=H(),P=H(),R=H(),b=H(!1);const D=Wr(),B=async U=>{var d;(w=>(N(o,w.item),N(c,w.property),N(f,w.language),N(m,w.iterations),N(p,w.limit),N(y,w.mode),N(E,w.wdqs),N(P,w.sizeProperty)))(U.queryParameters),N(b,((d=U.queryParameters.special)==null?void 0:d.instanceOrSubclass)??!1)},x=()=>{D("submit",_(n))};mt(()=>_(c),()=>{_(c)!=="P31"&&N(b,!1)}),mt(()=>_(b),()=>{_(b)&&(N(m,void 0),N(P,void 0),N(R,void 0))}),mt(()=>Ue(s()),()=>{B(s())}),mt(()=>(_(h),_(u),_(f),_(m),_(p),_(y),_(E),_(R),_(b)),()=>{var U,d,w;N(n,{property:(U=_(h))==null?void 0:U.id,item:(d=_(u))==null?void 0:d.id,language:_(f),iterations:_(m),limit:_(p),mode:_(y),wdqs:_(E),sizeProperty:(w=_(R))==null?void 0:w.id,special:{instanceOrSubclass:_(b)}})}),mt(()=>_(n),()=>{N(r,Rn(_(n)))}),mt(()=>_(n),()=>{N(i,Ss(_(n)))}),Dn(),le();var z=ks(),I=j(z),q=j(I);Gt(q,{class:"w-[calc(50%-0.25rem)] box-border",label:"Mode",children:(U,d)=>{Sn(U,{options:si,get value(){return _(y)},set value(w){N(y,w)},$$legacy:!0})},$$slots:{default:!0}});var G=W(q,2);Gt(G,{class:"w-[calc(50%-0.25rem)] box-border",label:"Language",children:(U,d)=>{ns(U,{placeholder:"Click to set",get value(){return _(f)},set value(w){N(f,w)},$$legacy:!0})},$$slots:{default:!0}}),Q(I);var X=W(I,2);{var L=U=>{Gt(U,{label:"SPARQL query",children:(d,w)=>{as(d,{multiline:!0,class:"min-h-[8rem] font-mono text-sm",get value(){return _(E)},set value(g){N(E,g)},$$legacy:!0})},$$slots:{default:!0}})},V=U=>{var d=Is(),w=ne(d);Gt(w,{label:"Traversal property",children:(O,F)=>{xn(O,{type:"property",get language(){return _(f)},get value(){return _(c)},set value(K){N(c,K)},get valueObject(){return _(h)},set valueObject(K){N(h,K)},$$legacy:!0})},$$slots:{default:!0}});var g=W(w,2);{var $=O=>{ss(O,{label:"Instance or subclass",get checked(){return _(b)},set checked(F){N(b,F)},$$legacy:!0})};Qt(g,O=>{_(c)==="P31"&&O($)})}var S=W(g,2);Gt(S,{label:"Root item",children:(O,F)=>{xn(O,{type:"item",get language(){return _(f)},get value(){return _(o)},set value(K){N(o,K)},get valueObject(){return _(u)},set valueObject(K){N(u,K)},$$legacy:!0})},$$slots:{default:!0}});var A=W(S,2);{var C=O=>{var F=zs(),K=ne(F);Gt(K,{label:"Iterations",children:(k,ct)=>{Qr(k,{min:0,max:1e5,placeholder:"Unlimited",treatZeroAsUndefined:!0,get value(){return _(m)},set value(nt){N(m,nt)},$$legacy:!0})},$$slots:{default:!0}});var tt=W(K,2);Gt(tt,{label:"Size property",children:(k,ct)=>{xn(k,{type:"property",get language(){return _(f)},get value(){return _(P)},set value(nt){N(P,nt)},get valueObject(){return _(R)},set valueObject(nt){N(R,nt)},$$legacy:!0})},$$slots:{default:!0}}),at(O,F)};Qt(A,O=>{_(b)||O(C)})}at(U,d)};Qt(X,U=>{_(y)==="wdqs"?U(L):U(V,!1)})}var et=W(X,2);Ns(et,{class:"flex gap-2 pt-2",children:(U,d)=>{var w=Os(),g=ne(w);const $=Gr(()=>!_(r));rs(g,{get disabled(){return _($)},class:"w-[calc(50%-0.25rem)]",primary:!0,$$events:{click:x},children:(A,C)=>{Ur();var O=Ya("Build");at(A,O)},$$slots:{default:!0}});var S=W(g,2);is(S,{class:"w-[calc(50%-0.25rem)]",title:"Tools",get links(){return _(i)}}),at(U,w)},$$slots:{default:!0}}),Q(z),at(t,z),Zt()}var Ls={value:()=>{}};function on(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ge(n)}function Ge(t){this._=t}function Ds(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ge.prototype=on.prototype={constructor:Ge,on:function(t,e){var n=this._,r=Ds(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Rs(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=br(n[i],t.name,e);else if(e==null)for(i in n)n[i]=br(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ge(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Rs(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function br(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ls,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var An="http://www.w3.org/1999/xhtml";const $r={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),$r.hasOwnProperty(e)?{space:$r[e],local:t}:t}function qs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===An&&e.documentElement.namespaceURI===An?e.createElement(t):e.createElementNS(n,t)}}function Bs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function li(t){var e=un(t);return(e.local?Bs:qs)(e)}function Fs(){}function Fn(t){return t==null?Fs:function(){return this.querySelector(t)}}function Hs(t){typeof t!="function"&&(t=Fn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,u=r[i]=new Array(o),c,h,f=0;f<o;++f)(c=s[f])&&(h=t.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h);return new dt(r,this._parents)}function Us(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Gs(){return[]}function ci(t){return t==null?Gs:function(){return this.querySelectorAll(t)}}function Xs(t){return function(){return Us(t.apply(this,arguments))}}function Vs(t){typeof t=="function"?t=Xs(t):t=ci(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],u=o.length,c,h=0;h<u;++h)(c=o[h])&&(r.push(t.call(c,c.__data__,h,o)),i.push(c));return new dt(r,i)}function fi(t){return function(){return this.matches(t)}}function hi(t){return function(e){return e.matches(t)}}var Qs=Array.prototype.find;function Ys(t){return function(){return Qs.call(this.children,t)}}function Ws(){return this.firstElementChild}function js(t){return this.select(t==null?Ws:Ys(typeof t=="function"?t:hi(t)))}var Ks=Array.prototype.filter;function Zs(){return Array.from(this.children)}function Js(t){return function(){return Ks.call(this.children,t)}}function to(t){return this.selectAll(t==null?Zs:Js(typeof t=="function"?t:hi(t)))}function eo(t){typeof t!="function"&&(t=fi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,u=r[i]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&u.push(c);return new dt(r,this._parents)}function di(t){return new Array(t.length)}function no(){return new dt(this._enter||this._groups.map(di),this._parents)}function je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}je.prototype={constructor:je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ro(t){return function(){return t}}function io(t,e,n,r,i,s){for(var o=0,u,c=e.length,h=s.length;o<h;++o)(u=e[o])?(u.__data__=s[o],r[o]=u):n[o]=new je(t,s[o]);for(;o<c;++o)(u=e[o])&&(i[o]=u)}function ao(t,e,n,r,i,s,o){var u,c,h=new Map,f=e.length,m=s.length,p=new Array(f),y;for(u=0;u<f;++u)(c=e[u])&&(p[u]=y=o.call(c,c.__data__,u,e)+"",h.has(y)?i[u]=c:h.set(y,c));for(u=0;u<m;++u)y=o.call(t,s[u],u,s)+"",(c=h.get(y))?(r[u]=c,c.__data__=s[u],h.delete(y)):n[u]=new je(t,s[u]);for(u=0;u<f;++u)(c=e[u])&&h.get(p[u])===c&&(i[u]=c)}function so(t){return t.__data__}function oo(t,e){if(!arguments.length)return Array.from(this,so);var n=e?ao:io,r=this._parents,i=this._groups;typeof t!="function"&&(t=ro(t));for(var s=i.length,o=new Array(s),u=new Array(s),c=new Array(s),h=0;h<s;++h){var f=r[h],m=i[h],p=m.length,y=uo(t.call(f,f&&f.__data__,h,r)),E=y.length,P=u[h]=new Array(E),R=o[h]=new Array(E),b=c[h]=new Array(p);n(f,m,P,R,b,y,e);for(var D=0,B=0,x,z;D<E;++D)if(x=P[D]){for(D>=B&&(B=D+1);!(z=R[B])&&++B<E;);x._next=z||null}}return o=new dt(o,r),o._enter=u,o._exit=c,o}function uo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lo(){return new dt(this._exit||this._groups.map(di),this._parents)}function co(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),u=new Array(i),c=0;c<o;++c)for(var h=n[c],f=r[c],m=h.length,p=u[c]=new Array(m),y,E=0;E<m;++E)(y=h[E]||f[E])&&(p[E]=y);for(;c<i;++c)u[c]=n[c];return new dt(u,this._parents)}function ho(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function go(t){t||(t=po);function e(m,p){return m&&p?t(m.__data__,p.__data__):!m-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],u=o.length,c=i[s]=new Array(u),h,f=0;f<u;++f)(h=o[f])&&(c[f]=h);c.sort(e)}return new dt(i,this._parents).order()}function po(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function mo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function vo(){return Array.from(this)}function _o(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function yo(){let t=0;for(const e of this)++t;return t}function wo(){return!this.node()}function xo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,u;s<o;++s)(u=i[s])&&t.call(u,u.__data__,s,i);return this}function bo(t){return function(){this.removeAttribute(t)}}function $o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function To(t,e){return function(){this.setAttribute(t,e)}}function Po(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function So(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Eo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ao(t,e){var n=un(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?$o:bo:typeof e=="function"?n.local?Eo:So:n.local?Po:To)(n,e))}function gi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Co(t){return function(){this.style.removeProperty(t)}}function No(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Io(t,e,n){return arguments.length>1?this.each((e==null?Co:typeof e=="function"?zo:No)(t,e,n??"")):oe(this.node(),t)}function oe(t,e){return t.style.getPropertyValue(e)||gi(t).getComputedStyle(t,null).getPropertyValue(e)}function Oo(t){return function(){delete this[t]}}function ko(t,e){return function(){this[t]=e}}function Mo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Lo(t,e){return arguments.length>1?this.each((e==null?Oo:typeof e=="function"?Mo:ko)(t,e)):this.node()[t]}function pi(t){return t.trim().split(/^|\s+/)}function Hn(t){return t.classList||new mi(t)}function mi(t){this._node=t,this._names=pi(t.getAttribute("class")||"")}mi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vi(t,e){for(var n=Hn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function _i(t,e){for(var n=Hn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Do(t){return function(){vi(this,t)}}function Ro(t){return function(){_i(this,t)}}function qo(t,e){return function(){(e.apply(this,arguments)?vi:_i)(this,t)}}function Bo(t,e){var n=pi(t+"");if(arguments.length<2){for(var r=Hn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?qo:e?Do:Ro)(n,e))}function Fo(){this.textContent=""}function Ho(t){return function(){this.textContent=t}}function Uo(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Go(t){return arguments.length?this.each(t==null?Fo:(typeof t=="function"?Uo:Ho)(t)):this.node().textContent}function Xo(){this.innerHTML=""}function Vo(t){return function(){this.innerHTML=t}}function Qo(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Yo(t){return arguments.length?this.each(t==null?Xo:(typeof t=="function"?Qo:Vo)(t)):this.node().innerHTML}function Wo(){this.nextSibling&&this.parentNode.appendChild(this)}function jo(){return this.each(Wo)}function Ko(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zo(){return this.each(Ko)}function Jo(t){var e=typeof t=="function"?t:li(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function tu(){return null}function eu(t,e){var n=typeof t=="function"?t:li(t),r=e==null?tu:typeof e=="function"?e:Fn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function nu(){var t=this.parentNode;t&&t.removeChild(this)}function ru(){return this.each(nu)}function iu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function au(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function su(t){return this.select(t?au:iu)}function ou(t){return arguments.length?this.property("__data__",t):this.node().__data__}function uu(t){return function(e){t.call(this,e,this.__data__)}}function lu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function cu(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function fu(t,e,n){return function(){var r=this.__on,i,s=uu(e);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function hu(t,e,n){var r=lu(t+""),i,s=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var c=0,h=u.length,f;c<h;++c)for(i=0,f=u[c];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(u=e?fu:cu,i=0;i<s;++i)this.each(u(r[i],e,n));return this}function yi(t,e,n){var r=gi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function du(t,e){return function(){return yi(this,t,e)}}function gu(t,e){return function(){return yi(this,t,e.apply(this,arguments))}}function pu(t,e){return this.each((typeof e=="function"?gu:du)(t,e))}function*mu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var wi=[null];function dt(t,e){this._groups=t,this._parents=e}function Se(){return new dt([[document.documentElement]],wi)}function vu(){return this}dt.prototype=Se.prototype={constructor:dt,select:Hs,selectAll:Vs,selectChild:js,selectChildren:to,filter:eo,data:oo,enter:no,exit:lo,join:co,merge:fo,selection:vu,order:ho,sort:go,call:mo,nodes:vo,node:_o,size:yo,empty:wo,each:xo,attr:Ao,style:Io,property:Lo,classed:Bo,text:Go,html:Yo,raise:jo,lower:Zo,append:Jo,insert:eu,remove:ru,clone:su,datum:ou,on:hu,dispatch:pu,[Symbol.iterator]:mu};function bt(t){return typeof t=="string"?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],wi)}function _u(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ct(t,e){if(t=_u(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const yu={passive:!1},ye={capture:!0,passive:!1};function bn(t){t.stopImmediatePropagation()}function re(t){t.preventDefault(),t.stopImmediatePropagation()}function xi(t){var e=t.document.documentElement,n=bt(t).on("dragstart.drag",re,ye);"onselectstart"in e?n.on("selectstart.drag",re,ye):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function bi(t,e){var n=t.document.documentElement,r=bt(t).on("dragstart.drag",null);e&&(r.on("click.drag",re,ye),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const De=t=>()=>t;function Cn(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:u,dx:c,dy:h,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}Cn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wu(t){return!t.ctrlKey&&!t.button}function xu(){return this.parentNode}function bu(t,e){return e??{x:t.x,y:t.y}}function $u(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tu(){var t=wu,e=xu,n=bu,r=$u,i={},s=on("start","drag","end"),o=0,u,c,h,f,m=0;function p(x){x.on("mousedown.drag",y).filter(r).on("touchstart.drag",R).on("touchmove.drag",b,yu).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(x,z){if(!(f||!t.call(this,x,z))){var I=B(this,e.call(this,x,z),x,z,"mouse");I&&(bt(x.view).on("mousemove.drag",E,ye).on("mouseup.drag",P,ye),xi(x.view),bn(x),h=!1,u=x.clientX,c=x.clientY,I("start",x))}}function E(x){if(re(x),!h){var z=x.clientX-u,I=x.clientY-c;h=z*z+I*I>m}i.mouse("drag",x)}function P(x){bt(x.view).on("mousemove.drag mouseup.drag",null),bi(x.view,h),re(x),i.mouse("end",x)}function R(x,z){if(t.call(this,x,z)){var I=x.changedTouches,q=e.call(this,x,z),G=I.length,X,L;for(X=0;X<G;++X)(L=B(this,q,x,z,I[X].identifier,I[X]))&&(bn(x),L("start",x,I[X]))}}function b(x){var z=x.changedTouches,I=z.length,q,G;for(q=0;q<I;++q)(G=i[z[q].identifier])&&(re(x),G("drag",x,z[q]))}function D(x){var z=x.changedTouches,I=z.length,q,G;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),q=0;q<I;++q)(G=i[z[q].identifier])&&(bn(x),G("end",x,z[q]))}function B(x,z,I,q,G,X){var L=s.copy(),V=Ct(X||I,z),et,U,d;if((d=n.call(x,new Cn("beforestart",{sourceEvent:I,target:p,identifier:G,active:o,x:V[0],y:V[1],dx:0,dy:0,dispatch:L}),q))!=null)return et=d.x-V[0]||0,U=d.y-V[1]||0,function w(g,$,S){var A=V,C;switch(g){case"start":i[G]=w,C=o++;break;case"end":delete i[G],--o;case"drag":V=Ct(S||$,z),C=o;break}L.call(g,x,new Cn(g,{sourceEvent:$,subject:d,target:p,identifier:G,active:C,x:V[0]+et,y:V[1]+U,dx:V[0]-A[0],dy:V[1]-A[1],dispatch:L}),q)}}return p.filter=function(x){return arguments.length?(t=typeof x=="function"?x:De(!!x),p):t},p.container=function(x){return arguments.length?(e=typeof x=="function"?x:De(x),p):e},p.subject=function(x){return arguments.length?(n=typeof x=="function"?x:De(x),p):n},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:De(!!x),p):r},p.on=function(){var x=s.on.apply(s,arguments);return x===s?p:x},p.clickDistance=function(x){return arguments.length?(m=(x=+x)*x,p):Math.sqrt(m)},p}function Un(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ee(){}var we=.7,Ke=1/we,ie="\\s*([+-]?\\d+)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pu=/^#([0-9a-f]{3,8})$/,Su=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),Eu=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),Au=new RegExp(`^rgba\\(${ie},${ie},${ie},${xe}\\)$`),Cu=new RegExp(`^rgba\\(${$t},${$t},${$t},${xe}\\)$`),Nu=new RegExp(`^hsl\\(${xe},${$t},${$t}\\)$`),zu=new RegExp(`^hsla\\(${xe},${$t},${$t},${xe}\\)$`),Tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Un(Ee,be,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pr,formatHex:Pr,formatHex8:Iu,formatHsl:Ou,formatRgb:Sr,toString:Sr});function Pr(){return this.rgb().formatHex()}function Iu(){return this.rgb().formatHex8()}function Ou(){return Ti(this).formatHsl()}function Sr(){return this.rgb().formatRgb()}function be(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Pu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Er(e):n===3?new ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Re(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Re(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Su.exec(t))?new ft(e[1],e[2],e[3],1):(e=Eu.exec(t))?new ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Au.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=Cu.exec(t))?Re(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nu.exec(t))?Nr(e[1],e[2]/100,e[3]/100,1):(e=zu.exec(t))?Nr(e[1],e[2]/100,e[3]/100,e[4]):Tr.hasOwnProperty(t)?Er(Tr[t]):t==="transparent"?new ft(NaN,NaN,NaN,0):null}function Er(t){return new ft(t>>16&255,t>>8&255,t&255,1)}function Re(t,e,n,r){return r<=0&&(t=e=n=NaN),new ft(t,e,n,r)}function ku(t){return t instanceof Ee||(t=be(t)),t?(t=t.rgb(),new ft(t.r,t.g,t.b,t.opacity)):new ft}function Nn(t,e,n,r){return arguments.length===1?ku(t):new ft(t,e,n,r??1)}function ft(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Un(ft,Nn,$i(Ee,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new ft(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?we:Math.pow(we,t),new ft(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ft(Wt(this.r),Wt(this.g),Wt(this.b),Ze(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ar,formatHex:Ar,formatHex8:Mu,formatRgb:Cr,toString:Cr}));function Ar(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}`}function Mu(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}${Vt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cr(){const t=Ze(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function Ze(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function Nr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new yt(t,e,n,r)}function Ti(t){if(t instanceof yt)return new yt(t.h,t.s,t.l,t.opacity);if(t instanceof Ee||(t=be(t)),!t)return new yt;if(t instanceof yt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,u=s-i,c=(s+i)/2;return u?(e===s?o=(n-r)/u+(n<r)*6:n===s?o=(r-e)/u+2:o=(e-n)/u+4,u/=c<.5?s+i:2-s-i,o*=60):u=c>0&&c<1?0:o,new yt(o,u,c,t.opacity)}function Lu(t,e,n,r){return arguments.length===1?Ti(t):new yt(t,e,n,r??1)}function yt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Un(yt,Lu,$i(Ee,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new yt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?we:Math.pow(we,t),new yt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ft($n(t>=240?t-240:t+120,i,r),$n(t,i,r),$n(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new yt(zr(this.h),qe(this.s),qe(this.l),Ze(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ze(this.opacity);return`${t===1?"hsl(":"hsla("}${zr(this.h)}, ${qe(this.s)*100}%, ${qe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zr(t){return t=(t||0)%360,t<0?t+360:t}function qe(t){return Math.max(0,Math.min(1,t||0))}function $n(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Pi=t=>()=>t;function Du(t,e){return function(n){return t+n*e}}function Ru(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function qu(t){return(t=+t)==1?Si:function(e,n){return n-e?Ru(e,n,t):Pi(isNaN(e)?n:e)}}function Si(t,e){var n=e-t;return n?Du(t,n):Pi(isNaN(t)?e:t)}const Ir=function t(e){var n=qu(e);function r(i,s){var o=n((i=Nn(i)).r,(s=Nn(s)).r),u=n(i.g,s.g),c=n(i.b,s.b),h=Si(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=u(f),i.b=c(f),i.opacity=h(f),i+""}}return r.gamma=t,r}(1);function Lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tn=new RegExp(zn.source,"g");function Bu(t){return function(){return t}}function Fu(t){return function(e){return t(e)+""}}function Hu(t,e){var n=zn.lastIndex=Tn.lastIndex=0,r,i,s,o=-1,u=[],c=[];for(t=t+"",e=e+"";(r=zn.exec(t))&&(i=Tn.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,c.push({i:o,x:Lt(r,i)})),n=Tn.lastIndex;return n<e.length&&(s=e.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?c[0]?Fu(c[0].x):Bu(e):(e=c.length,function(h){for(var f=0,m;f<e;++f)u[(m=c[f]).i]=m.x(h);return u.join("")})}var Or=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ei(t,e,n,r,i,s){var o,u,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Or,skewX:Math.atan(c)*Or,scaleX:o,scaleY:u}}var Be;function Uu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?In:Ei(e.a,e.b,e.c,e.d,e.e,e.f)}function Gu(t){return t==null||(Be||(Be=document.createElementNS("http://www.w3.org/2000/svg","g")),Be.setAttribute("transform",t),!(t=Be.transform.baseVal.consolidate()))?In:(t=t.matrix,Ei(t.a,t.b,t.c,t.d,t.e,t.f))}function Ai(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function s(h,f,m,p,y,E){if(h!==m||f!==p){var P=y.push("translate(",null,e,null,n);E.push({i:P-4,x:Lt(h,m)},{i:P-2,x:Lt(f,p)})}else(m||p)&&y.push("translate("+m+e+p+n)}function o(h,f,m,p){h!==f?(h-f>180?f+=360:f-h>180&&(h+=360),p.push({i:m.push(i(m)+"rotate(",null,r)-2,x:Lt(h,f)})):f&&m.push(i(m)+"rotate("+f+r)}function u(h,f,m,p){h!==f?p.push({i:m.push(i(m)+"skewX(",null,r)-2,x:Lt(h,f)}):f&&m.push(i(m)+"skewX("+f+r)}function c(h,f,m,p,y,E){if(h!==m||f!==p){var P=y.push(i(y)+"scale(",null,",",null,")");E.push({i:P-4,x:Lt(h,m)},{i:P-2,x:Lt(f,p)})}else(m!==1||p!==1)&&y.push(i(y)+"scale("+m+","+p+")")}return function(h,f){var m=[],p=[];return h=t(h),f=t(f),s(h.translateX,h.translateY,f.translateX,f.translateY,m,p),o(h.rotate,f.rotate,m,p),u(h.skewX,f.skewX,m,p),c(h.scaleX,h.scaleY,f.scaleX,f.scaleY,m,p),h=f=null,function(y){for(var E=-1,P=p.length,R;++E<P;)m[(R=p[E]).i]=R.x(y);return m.join("")}}}var Xu=Ai(Uu,"px, ","px)","deg)"),Vu=Ai(Gu,", ",")",")"),Qu=1e-12;function kr(t){return((t=Math.exp(t))+1/t)/2}function Yu(t){return((t=Math.exp(t))-1/t)/2}function Wu(t){return((t=Math.exp(2*t))-1)/(t+1)}const ju=function t(e,n,r){function i(s,o){var u=s[0],c=s[1],h=s[2],f=o[0],m=o[1],p=o[2],y=f-u,E=m-c,P=y*y+E*E,R,b;if(P<Qu)b=Math.log(p/h)/e,R=function(q){return[u+q*y,c+q*E,h*Math.exp(e*q*b)]};else{var D=Math.sqrt(P),B=(p*p-h*h+r*P)/(2*h*n*D),x=(p*p-h*h-r*P)/(2*p*n*D),z=Math.log(Math.sqrt(B*B+1)-B),I=Math.log(Math.sqrt(x*x+1)-x);b=(I-z)/e,R=function(q){var G=q*b,X=kr(z),L=h/(n*D)*(X*Wu(e*G+z)-Yu(z));return[u+L*y,c+L*E,h*X/kr(e*G+z)]}}return R.duration=b*1e3*e/Math.SQRT2,R}return i.rho=function(s){var o=Math.max(.001,+s),u=o*o,c=u*u;return t(o,u,c)},i}(Math.SQRT2,2,4);var ue=0,ve=0,pe=0,Ci=1e3,Je,_e,tn=0,jt=0,ln=0,$e=typeof performance=="object"&&performance.now?performance:Date,Ni=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gn(){return jt||(Ni(Ku),jt=$e.now()+ln)}function Ku(){jt=0}function en(){this._call=this._time=this._next=null}en.prototype=zi.prototype={constructor:en,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Gn():+n)+(e==null?0:+e),!this._next&&_e!==this&&(_e?_e._next=this:Je=this,_e=this),this._call=t,this._time=n,On()},stop:function(){this._call&&(this._call=null,this._time=1/0,On())}};function zi(t,e,n){var r=new en;return r.restart(t,e,n),r}function Zu(){Gn(),++ue;for(var t=Je,e;t;)(e=jt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ue}function Mr(){jt=(tn=$e.now())+ln,ue=ve=0;try{Zu()}finally{ue=0,tl(),jt=0}}function Ju(){var t=$e.now(),e=t-tn;e>Ci&&(ln-=e,tn=t)}function tl(){for(var t,e=Je,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Je=n);_e=t,On(r)}function On(t){if(!ue){ve&&(ve=clearTimeout(ve));var e=t-jt;e>24?(t<1/0&&(ve=setTimeout(Mr,t-$e.now()-ln)),pe&&(pe=clearInterval(pe))):(pe||(tn=$e.now(),pe=setInterval(Ju,Ci)),ue=1,Ni(Mr))}}function Lr(t,e,n){var r=new en;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var el=on("start","end","cancel","interrupt"),nl=[],Ii=0,Dr=1,kn=2,Xe=3,Rr=4,Mn=5,Ve=6;function cn(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;rl(t,n,{name:e,index:r,group:i,on:el,tween:nl,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ii})}function Xn(t,e){var n=wt(t,e);if(n.state>Ii)throw new Error("too late; already scheduled");return n}function Tt(t,e){var n=wt(t,e);if(n.state>Xe)throw new Error("too late; already running");return n}function wt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function rl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=zi(s,0,n.time);function s(h){n.state=Dr,n.timer.restart(o,n.delay,n.time),n.delay<=h&&o(h-n.delay)}function o(h){var f,m,p,y;if(n.state!==Dr)return c();for(f in r)if(y=r[f],y.name===n.name){if(y.state===Xe)return Lr(o);y.state===Rr?(y.state=Ve,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete r[f]):+f<e&&(y.state=Ve,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete r[f])}if(Lr(function(){n.state===Xe&&(n.state=Rr,n.timer.restart(u,n.delay,n.time),u(h))}),n.state=kn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===kn){for(n.state=Xe,i=new Array(p=n.tween.length),f=0,m=-1;f<p;++f)(y=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++m]=y);i.length=m+1}}function u(h){for(var f=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(c),n.state=Mn,1),m=-1,p=i.length;++m<p;)i[m].call(t,f);n.state===Mn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ve,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function Qe(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>kn&&r.state<Mn,r.state=Ve,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function il(t){return this.each(function(){Qe(this,t)})}function al(t,e){var n,r;return function(){var i=Tt(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,u=r.length;o<u;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Tt(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var u={name:e,value:n},c=0,h=i.length;c<h;++c)if(i[c].name===e){i[c]=u;break}c===h&&i.push(u)}s.tween=i}}function ol(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=wt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?al:sl)(n,t,e))}function Vn(t,e,n){var r=t._id;return t.each(function(){var i=Tt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return wt(i,r).value[e]}}function Oi(t,e){var n;return(typeof e=="number"?Lt:e instanceof be?Ir:(n=be(e))?(e=n,Ir):Hu)(t,e)}function ul(t){return function(){this.removeAttribute(t)}}function ll(t){return function(){this.removeAttributeNS(t.space,t.local)}}function cl(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function fl(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function hl(t,e,n){var r,i,s;return function(){var o,u=n(this),c;return u==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=u+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,u)))}}function dl(t,e,n){var r,i,s;return function(){var o,u=n(this),c;return u==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=u+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,u)))}}function gl(t,e){var n=un(t),r=n==="transform"?Vu:Oi;return this.attrTween(t,typeof e=="function"?(n.local?dl:hl)(n,r,Vn(this,"attr."+t,e)):e==null?(n.local?ll:ul)(n):(n.local?fl:cl)(n,r,e))}function pl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ml(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function vl(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ml(t,s)),n}return i._value=e,i}function _l(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&pl(t,s)),n}return i._value=e,i}function yl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=un(t);return this.tween(n,(r.local?vl:_l)(r,e))}function wl(t,e){return function(){Xn(this,t).delay=+e.apply(this,arguments)}}function xl(t,e){return e=+e,function(){Xn(this,t).delay=e}}function bl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?wl:xl)(e,t)):wt(this.node(),e).delay}function $l(t,e){return function(){Tt(this,t).duration=+e.apply(this,arguments)}}function Tl(t,e){return e=+e,function(){Tt(this,t).duration=e}}function Pl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$l:Tl)(e,t)):wt(this.node(),e).duration}function Sl(t,e){if(typeof e!="function")throw new Error;return function(){Tt(this,t).ease=e}}function El(t){var e=this._id;return arguments.length?this.each(Sl(e,t)):wt(this.node(),e).ease}function Al(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Tt(this,t).ease=n}}function Cl(t){if(typeof t!="function")throw new Error;return this.each(Al(this._id,t))}function Nl(t){typeof t!="function"&&(t=fi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,u=r[i]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&u.push(c);return new It(r,this._parents,this._name,this._id)}function zl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var c=e[u],h=n[u],f=c.length,m=o[u]=new Array(f),p,y=0;y<f;++y)(p=c[y]||h[y])&&(m[y]=p);for(;u<r;++u)o[u]=e[u];return new It(o,this._parents,this._name,this._id)}function Il(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ol(t,e,n){var r,i,s=Il(e)?Xn:Tt;return function(){var o=s(this,t),u=o.on;u!==r&&(i=(r=u).copy()).on(e,n),o.on=i}}function kl(t,e){var n=this._id;return arguments.length<2?wt(this.node(),n).on.on(t):this.each(Ol(n,t,e))}function Ml(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ll(){return this.on("end.remove",Ml(this._id))}function Dl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Fn(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var u=r[o],c=u.length,h=s[o]=new Array(c),f,m,p=0;p<c;++p)(f=u[p])&&(m=t.call(f,f.__data__,p,u))&&("__data__"in f&&(m.__data__=f.__data__),h[p]=m,cn(h[p],e,n,p,h,wt(f,n)));return new It(s,this._parents,e,n)}function Rl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ci(t));for(var r=this._groups,i=r.length,s=[],o=[],u=0;u<i;++u)for(var c=r[u],h=c.length,f,m=0;m<h;++m)if(f=c[m]){for(var p=t.call(f,f.__data__,m,c),y,E=wt(f,n),P=0,R=p.length;P<R;++P)(y=p[P])&&cn(y,e,n,P,p,E);s.push(p),o.push(f)}return new It(s,o,e,n)}var ql=Se.prototype.constructor;function Bl(){return new ql(this._groups,this._parents)}function Fl(t,e){var n,r,i;return function(){var s=oe(this,t),o=(this.style.removeProperty(t),oe(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function ki(t){return function(){this.style.removeProperty(t)}}function Hl(t,e,n){var r,i=n+"",s;return function(){var o=oe(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Ul(t,e,n){var r,i,s;return function(){var o=oe(this,t),u=n(this),c=u+"";return u==null&&(c=u=(this.style.removeProperty(t),oe(this,t))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,u))}}function Gl(t,e){var n,r,i,s="style."+e,o="end."+s,u;return function(){var c=Tt(this,t),h=c.on,f=c.value[s]==null?u||(u=ki(e)):void 0;(h!==n||i!==f)&&(r=(n=h).copy()).on(o,i=f),c.on=r}}function Xl(t,e,n){var r=(t+="")=="transform"?Xu:Oi;return e==null?this.styleTween(t,Fl(t,r)).on("end.style."+t,ki(t)):typeof e=="function"?this.styleTween(t,Ul(t,r,Vn(this,"style."+t,e))).each(Gl(this._id,t)):this.styleTween(t,Hl(t,r,e),n).on("end.style."+t,null)}function Vl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ql(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Vl(t,o,n)),r}return s._value=e,s}function Yl(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ql(t,e,n??""))}function Wl(t){return function(){this.textContent=t}}function jl(t){return function(){var e=t(this);this.textContent=e??""}}function Kl(t){return this.tween("text",typeof t=="function"?jl(Vn(this,"text",t)):Wl(t==null?"":t+""))}function Zl(t){return function(e){this.textContent=t.call(this,e)}}function Jl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Zl(i)),e}return r._value=t,r}function tc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Jl(t))}function ec(){for(var t=this._name,e=this._id,n=Mi(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,c,h=0;h<u;++h)if(c=o[h]){var f=wt(c,e);cn(c,t,n,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new It(r,this._parents,t,n)}function nc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var u={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var h=Tt(this,r),f=h.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(c)),h.on=e}),i===0&&s()})}var rc=0;function It(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Mi(){return++rc}var At=Se.prototype;It.prototype={constructor:It,select:Dl,selectAll:Rl,selectChild:At.selectChild,selectChildren:At.selectChildren,filter:Nl,merge:zl,selection:Bl,transition:ec,call:At.call,nodes:At.nodes,node:At.node,size:At.size,empty:At.empty,each:At.each,on:kl,attr:gl,attrTween:yl,style:Xl,styleTween:Yl,text:Kl,textTween:tc,remove:Ll,tween:ol,delay:bl,duration:Pl,ease:El,easeVarying:Cl,end:nc,[Symbol.iterator]:At[Symbol.iterator]};function ic(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ac={time:null,delay:0,duration:250,ease:ic};function sc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function oc(t){var e,n;t instanceof It?(e=t._id,t=t._name):(e=Mi(),(n=ac).time=Gn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,c,h=0;h<u;++h)(c=o[h])&&cn(c,t,e,h,o,n||sc(c,e));return new It(r,this._parents,t,e)}Se.prototype.interrupt=il;Se.prototype.transition=oc;const Fe=t=>()=>t;function uc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Nt(t,e,n){this.k=t,this.x=e,this.y=n}Nt.prototype={constructor:Nt,scale:function(t){return t===1?this:new Nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qn=new Nt(1,0,0);Ln.prototype=Nt.prototype;function Ln(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Qn;return t.__zoom}function Pn(t){t.stopImmediatePropagation()}function me(t){t.preventDefault(),t.stopImmediatePropagation()}function lc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function cc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function qr(){return this.__zoom||Qn}function fc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function hc(){return navigator.maxTouchPoints||"ontouchstart"in this}function dc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function gc(){var t=lc,e=cc,n=dc,r=fc,i=hc,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],u=250,c=ju,h=on("start","zoom","end"),f,m,p,y=500,E=150,P=0,R=10;function b(d){d.property("__zoom",qr).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",X).on("dblclick.zoom",L).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",et).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(d,w,g,$){var S=d.selection?d.selection():d;S.property("__zoom",qr),d!==S?z(d,w,g,$):S.interrupt().each(function(){I(this,arguments).event($).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},b.scaleBy=function(d,w,g,$){b.scaleTo(d,function(){var S=this.__zoom.k,A=typeof w=="function"?w.apply(this,arguments):w;return S*A},g,$)},b.scaleTo=function(d,w,g,$){b.transform(d,function(){var S=e.apply(this,arguments),A=this.__zoom,C=g==null?x(S):typeof g=="function"?g.apply(this,arguments):g,O=A.invert(C),F=typeof w=="function"?w.apply(this,arguments):w;return n(B(D(A,F),C,O),S,o)},g,$)},b.translateBy=function(d,w,g,$){b.transform(d,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof g=="function"?g.apply(this,arguments):g),e.apply(this,arguments),o)},null,$)},b.translateTo=function(d,w,g,$,S){b.transform(d,function(){var A=e.apply(this,arguments),C=this.__zoom,O=$==null?x(A):typeof $=="function"?$.apply(this,arguments):$;return n(Qn.translate(O[0],O[1]).scale(C.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof g=="function"?-g.apply(this,arguments):-g),A,o)},$,S)};function D(d,w){return w=Math.max(s[0],Math.min(s[1],w)),w===d.k?d:new Nt(w,d.x,d.y)}function B(d,w,g){var $=w[0]-g[0]*d.k,S=w[1]-g[1]*d.k;return $===d.x&&S===d.y?d:new Nt(d.k,$,S)}function x(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function z(d,w,g,$){d.on("start.zoom",function(){I(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event($).end()}).tween("zoom",function(){var S=this,A=arguments,C=I(S,A).event($),O=e.apply(S,A),F=g==null?x(O):typeof g=="function"?g.apply(S,A):g,K=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),tt=S.__zoom,k=typeof w=="function"?w.apply(S,A):w,ct=c(tt.invert(F).concat(K/tt.k),k.invert(F).concat(K/k.k));return function(nt){if(nt===1)nt=k;else{var rt=ct(nt),Jt=K/rt[2];nt=new Nt(Jt,F[0]-rt[0]*Jt,F[1]-rt[1]*Jt)}C.zoom(null,nt)}})}function I(d,w,g){return!g&&d.__zooming||new q(d,w)}function q(d,w){this.that=d,this.args=w,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,w),this.taps=0}q.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,w){return this.mouse&&d!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var w=bt(this.that).datum();h.call(d,this.that,new uc(d,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:h}),w)}};function G(d,...w){if(!t.apply(this,arguments))return;var g=I(this,w).event(d),$=this.__zoom,S=Math.max(s[0],Math.min(s[1],$.k*Math.pow(2,r.apply(this,arguments)))),A=Ct(d);if(g.wheel)(g.mouse[0][0]!==A[0]||g.mouse[0][1]!==A[1])&&(g.mouse[1]=$.invert(g.mouse[0]=A)),clearTimeout(g.wheel);else{if($.k===S)return;g.mouse=[A,$.invert(A)],Qe(this),g.start()}me(d),g.wheel=setTimeout(C,E),g.zoom("mouse",n(B(D($,S),g.mouse[0],g.mouse[1]),g.extent,o));function C(){g.wheel=null,g.end()}}function X(d,...w){if(p||!t.apply(this,arguments))return;var g=d.currentTarget,$=I(this,w,!0).event(d),S=bt(d.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",K,!0),A=Ct(d,g),C=d.clientX,O=d.clientY;xi(d.view),Pn(d),$.mouse=[A,this.__zoom.invert(A)],Qe(this),$.start();function F(tt){if(me(tt),!$.moved){var k=tt.clientX-C,ct=tt.clientY-O;$.moved=k*k+ct*ct>P}$.event(tt).zoom("mouse",n(B($.that.__zoom,$.mouse[0]=Ct(tt,g),$.mouse[1]),$.extent,o))}function K(tt){S.on("mousemove.zoom mouseup.zoom",null),bi(tt.view,$.moved),me(tt),$.event(tt).end()}}function L(d,...w){if(t.apply(this,arguments)){var g=this.__zoom,$=Ct(d.changedTouches?d.changedTouches[0]:d,this),S=g.invert($),A=g.k*(d.shiftKey?.5:2),C=n(B(D(g,A),$,S),e.apply(this,w),o);me(d),u>0?bt(this).transition().duration(u).call(z,C,$,d):bt(this).call(b.transform,C,$,d)}}function V(d,...w){if(t.apply(this,arguments)){var g=d.touches,$=g.length,S=I(this,w,d.changedTouches.length===$).event(d),A,C,O,F;for(Pn(d),C=0;C<$;++C)O=g[C],F=Ct(O,this),F=[F,this.__zoom.invert(F),O.identifier],S.touch0?!S.touch1&&S.touch0[2]!==F[2]&&(S.touch1=F,S.taps=0):(S.touch0=F,A=!0,S.taps=1+!!f);f&&(f=clearTimeout(f)),A&&(S.taps<2&&(m=F[0],f=setTimeout(function(){f=null},y)),Qe(this),S.start())}}function et(d,...w){if(this.__zooming){var g=I(this,w).event(d),$=d.changedTouches,S=$.length,A,C,O,F;for(me(d),A=0;A<S;++A)C=$[A],O=Ct(C,this),g.touch0&&g.touch0[2]===C.identifier?g.touch0[0]=O:g.touch1&&g.touch1[2]===C.identifier&&(g.touch1[0]=O);if(C=g.that.__zoom,g.touch1){var K=g.touch0[0],tt=g.touch0[1],k=g.touch1[0],ct=g.touch1[1],nt=(nt=k[0]-K[0])*nt+(nt=k[1]-K[1])*nt,rt=(rt=ct[0]-tt[0])*rt+(rt=ct[1]-tt[1])*rt;C=D(C,Math.sqrt(nt/rt)),O=[(K[0]+k[0])/2,(K[1]+k[1])/2],F=[(tt[0]+ct[0])/2,(tt[1]+ct[1])/2]}else if(g.touch0)O=g.touch0[0],F=g.touch0[1];else return;g.zoom("touch",n(B(C,O,F),g.extent,o))}}function U(d,...w){if(this.__zooming){var g=I(this,w).event(d),$=d.changedTouches,S=$.length,A,C;for(Pn(d),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),A=0;A<S;++A)C=$[A],g.touch0&&g.touch0[2]===C.identifier?delete g.touch0:g.touch1&&g.touch1[2]===C.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),g.taps===2&&(C=Ct(C,this),Math.hypot(m[0]-C[0],m[1]-C[1])<R)){var O=bt(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return b.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:Fe(+d),b):r},b.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Fe(!!d),b):t},b.touchable=function(d){return arguments.length?(i=typeof d=="function"?d:Fe(!!d),b):i},b.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Fe([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),b):e},b.scaleExtent=function(d){return arguments.length?(s[0]=+d[0],s[1]=+d[1],b):[s[0],s[1]]},b.translateExtent=function(d){return arguments.length?(o[0][0]=+d[0][0],o[1][0]=+d[1][0],o[0][1]=+d[0][1],o[1][1]=+d[1][1],b):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},b.constrain=function(d){return arguments.length?(n=d,b):n},b.duration=function(d){return arguments.length?(u=+d,b):u},b.interpolate=function(d){return arguments.length?(c=d,b):c},b.on=function(){var d=h.on.apply(h,arguments);return d===h?b:d},b.clickDistance=function(d){return arguments.length?(P=(d=+d)*d,b):Math.sqrt(P)},b.tapDistance=function(d){return arguments.length?(R=+d,b):R},b}class nn{constructor(e,n){lt(this,"tooltip",vt());lt(this,"isHover",vt(!1));lt(this,"state",vt("ok"));lt(this,"error",vt());lt(this,"isDragging",vt(!1));lt(this,"pointerPos",vt({x:-1e12,y:-1e12}));lt(this,"resizeObserver");lt(this,"width",0);lt(this,"height",0);lt(this,"zoomBehavior",gc());lt(this,"graphEngine");lt(this,"d3Canvas");lt(this,"hoverNodeId");lt(this,"draggable",!0);this.canvas=e,this.graphEngine=n(this);let r={x:-1e12,y:-1e12};this.d3Canvas=bt(this.canvas),this.zoomBehavior.on("zoom",f=>{this.graphEngine.onZoomTransform({x:f.transform.x,y:f.transform.y,k:f.transform.k})}).on("end",f=>{this.graphEngine.onZoomTransformEnd()});const i=()=>this.draggable?this.hoverNodeId:void 0,s=f=>{this.isDragging.set(!0);const m=f.subject;this.graphEngine.onDragStart(m,f.active)},o=f=>{const m=f.subject,[p,y]=Ln(this.canvas).invert([f.x,f.y]);this.graphEngine.onDrag(m,{x:p,y})},u=f=>{const m=f.subject;this.isDragging.set(!1),this.graphEngine.onDragEnd(m)},c=Tu().subject(i).on("start",s).on("drag",o).on("end",u);this.d3Canvas.call(c).call(this.zoomBehavior),this.resizeObserver=new ResizeObserver(()=>{this.adjustCanvasSize()}),this.resizeObserver.observe(e),this.adjustCanvasSize();const h=f=>{f.type==="pointerdown"&&this.graphEngine.onPointerDown();const m=e.getBoundingClientRect(),p=window.pageXOffset||document.documentElement.scrollLeft,y=window.pageYOffset||document.documentElement.scrollTop,E={top:m.top+y,left:m.left+p};r={x:f.pageX-E.left,y:f.pageY-E.top},this.pointerPos.set(r),this.graphEngine.setPointerPos(r)};e.addEventListener("pointermove",h,{passive:!0}),e.addEventListener("pointerdown",h,{passive:!0}),e.addEventListener("pointerup",f=>{this.graphEngine.onPointerUp(f.button)},{passive:!0})}static async create(e,n){if(!!!HTMLCanvasElement.prototype.transferControlToOffscreen){const{GraphEngine:o}=await _r(async()=>{const{GraphEngine:c}=await import("./FCAklcpH.js");return{GraphEngine:c}},[],import.meta.url),u=c=>new o(e,n,c);return new nn(e,u)}const{default:i}=await _r(async()=>{const{default:o}=await import("./BcHiSilS.js");return{default:o}},[],import.meta.url),s=o=>{const u=new i;u.addEventListener("message",f=>{const[m,...p]=f.data;o[m].bind(o)(...p)});const c=e.transferControlToOffscreen();return u.postMessage(["init",c,n],[c]),new Proxy({},{get(f,m,p){return(...y)=>{if(m==="destroy"){u.terminate();return}u.postMessage([m,...y])}}})};return new nn(e,s)}load(e,n){this.graphEngine.load(e,n)}setVisParameters(e){this.draggable=e.graphDirection==="none",this.graphEngine.setVisParameters(e)}destroy(){this.resizeObserver.unobserve(this.canvas),this.graphEngine.destroy()}setTooltip(e){this.tooltip.set(e)}setHoverNodeId(e){this.hoverNodeId=e,this.isHover.set(e!==void 0)}onNodeClicked(e){window.open(e,"_blank")}onLayoutComplete(e,n,r,i){const s=Math.max(1e-12,Math.min(1e12,this.canvas.width/r,this.canvas.height/i))/window.devicePixelRatio;this.zoomBehavior.translateTo(this.d3Canvas,e+r/2,n+i/2),this.zoomBehavior.scaleTo(this.d3Canvas,s),this.graphEngine.requestRedraw()}setState(e){this.state.set(e)}setError(e){this.error.set(e)}adjustCanvasSize(){const e=this.width,n=this.height;this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.graphEngine.adjustCanvasSize(this.canvas.clientWidth,this.canvas.clientHeight,window.devicePixelRatio);const r=Ln(this.canvas).k;this.zoomBehavior.translateBy(this.d3Canvas,(this.width-e)/2/r,(this.height-n)/2/r),this.graphEngine.requestRedraw()}}var pc=ot('<div class="absolute inset-0 flex items-center justify-center"><!></div>'),mc=ot('<div class="absolute inset-0 flex items-center justify-center"><div class="flex p-4 mx-4 text-sm rounded bg-gray-800 text-red-400 items-center" role="alert"><!> <div class="pl-4 space-y-3"><div class="font-medium">Unable to load graph data</div> <div> </div></div></div></div>'),vc=ot('<div class="h-full overflow-clip force-graph-container relative"><canvas></canvas> <div class="absolute p-1 rounded-sm text-gray-100 bg-black/60 text-center"><!></div> <!> <!></div>');function _c(t,e){Kt(e,!1);const[n,r]=Xr(),i=()=>Xt(_(b),"$tooltip",n),s=()=>Xt(_(R),"$pointerPos",n),o=()=>Xt(_(B),"$isDragging",n),u=()=>Xt(_(D),"$isHover",n),c=()=>Xt(_(x),"$state",n),h=()=>Xt(_(z),"$error",n),f=H();let m=zt(e,"query",8),p=zt(e,"rootNode",8),y=zt(e,"visParameters",8),E=H(),P=H(),R=H(vt({x:-1e12,y:-1e12})),b=H(vt()),D=H(vt(!1)),B=H(vt(!1)),x=H(vt("ok")),z=H(vt());vs(async()=>{N(P,await nn.create(_(E),y())),(g=>(ee(N(R,g.pointerPos),"$pointerPos",n),ee(N(b,g.tooltip),"$tooltip",n),ee(N(D,g.isHover),"$isHover",n),ee(N(B,g.isDragging),"$isDragging",n),ee(N(x,g.state),"$state",n),ee(N(z,g.error),"$error",n)))(_(P))}),_s(()=>{_(P).destroy()});let I=H(),q=H();mt(()=>(_(P),Ue(m()),Ue(p())),()=>{var g;(g=_(P))==null||g.load(m(),p())}),mt(()=>(_(P),Ue(y())),()=>{var g;(g=_(P))==null||g.setVisParameters(y())}),mt(()=>(i(),s(),_(I),_(q)),()=>{N(f,i()?`            top: ${s().y}px; 
            left: ${s().x}px; 
            transform: translate(-${s().x/_(I)*100}%,             ${_(q)-s().y<100?"calc(-100% - 8px)":"21px"}`:"display:none")}),Dn(),le();var G=vc(),X=j(G);Ja(X,g=>N(E,g),()=>_(E));var L=W(X,2),V=j(L);os(V,i),Q(L);var et=W(L,2);{var U=g=>{var $=pc(),S=j($);ls(S,{class:"w-16 h-16"}),Q($),at(g,$)};Qt(et,g=>{c()==="loading"&&g(U)})}var d=W(et,2);{var w=g=>{var $=mc(),S=j($),A=j(S);Yr(A,{path:cs,class:"w-16 h-16 fill-red-400"});var C=W(A,2),O=W(j(C),2),F=j(O,!0);Q(O),Q(C),Q(S),Q($),Rt(()=>Pe(F,h())),at(g,$)};Qt(d,g=>{c()==="error"&&g(w)})}Q(G),Rt(()=>{Yt(X,1,`select-none w-full h-full
        ${(o()?"cursor-grabbing":u()?"cursor-pointer":"")??""}`),us(L,_(f))}),yr(X,"clientWidth",g=>N(I,g)),yr(X,"clientHeight",g=>N(q,g)),at(t,G),Zt(),r()}var yc=ot('<li><a class="svelte-14jjgpl"> </a></li>'),wc=ot('<h1 class="text-3xl md:text-4xl my-8">Wikidata Graph Builder</h1> <p class="svelte-14jjgpl">Build graphs using <a href="https://www.wikidata.org" class="svelte-14jjgpl">Wikidata</a> <a href="https://query.wikidata.org/" class="svelte-14jjgpl">Query Service</a>.</p> <p class="svelte-14jjgpl">Examples:</p> <ul class="svelte-14jjgpl"></ul> <p class="text-sm svelte-14jjgpl">The source code released under <a href="https://opensource.org/licenses/MIT" class="svelte-14jjgpl">MIT license</a> at <a href="https://github.com/AngryLoki/wikidata-tree-builder" class="svelte-14jjgpl">GitHub</a>.</p>',1);function xc(t,e){Kt(e,!1);const n=o=>"?"+new URLSearchParams(o).toString(),r={"Parent taxons of Blue Whale (force-based)":{item:"Q42196",property:"P171",sc_color:"#0000003c"},"Class tree for human (directed)":{item:"Q5",property:"P279",graph_direction:"down"},"Parents of Nikita Mikhalkov (directed)":{item:"Q55207",property:"P40",mode:"reverse",iterations:"20",graph_direction:"down"},"Children of Agnes of the Palatinate (force-based, 4 generations)":{property:"P40",item:"Q4450926",iterations:"4"},"Types of integers (force-based, counting instances of each type)":{property:"P279",item:"Q12503",mode:"reverse",size_property:"P31"},"Subclasses of physicists (force-based, counting people by occupation)":{property:"P279",item:"Q169470",mode:"reverse",size_property:"P106"},"Subclasses and parent classes of nonmetals (force-based)":{property:"P279",item:"Q19600",mode:"both"},"People, who were filmed with Jim Carrey":{property:"P161",item:"Q40504",mode:"undirected",iterations:"2"},"All-directional family tree of William Shakespeare":{property:"P40",item:"Q692",mode:"undirected",iterations:"4",graph_direction:"down"},"Is Jesus a descendant of Adam of the 53rd tribe?":{property:"P40",item:"Q70899",iterations:"60",graph_direction:"down"},"Force-directed graph drawing is surely an entity":{property:"P279",item:"Q3076841",graph_direction:"down"},"Connectivity of the USA states (custom query)":{mode:"wdqs",wdqs:`SELECT ?item ?itemLabel ?linkTo {
?item wdt:P31 wd:Q35657 .
OPTIONAL { ?linkTo wdt:P47 ?item ; wdt:P31 wd:Q35657 } .

SERVICE wikibase:label {bd:serviceParam wikibase:language "en" }
}`},"Usage of subclasses of actors":{property:"P279",item:"Q33999",mode:"reverse",size_property:"P106"},"Class tree for Statue of Liberty":{property:"P31",item:"Q9202",mode:"forward",graph_direction:"down",instance_or_subclass:"1"},"Classification of finite simple groups":{property:"P31",item:"Q45033382",mode:"reverse",graph_direction:"down",instance_or_subclass:"1"}};le();var i=wc(),s=W(ne(i),6);fs(s,5,()=>Object.entries(r),hs,(o,u)=>{let c=()=>_(u)[0],h=()=>_(u)[1];var f=yc(),m=j(f),p=j(m,!0);Q(m),Q(f),Rt(y=>{se(m,"href",y),Pe(p,c())},[()=>n(h())],Gr),at(o,f)}),Q(s),Ur(2),at(t,i),Zt()}var rn={exports:{}};rn.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,u="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",m="[object Date]",p="[object Error]",y="[object Function]",E="[object GeneratorFunction]",P="[object Map]",R="[object Number]",b="[object Null]",D="[object Object]",B="[object Promise]",x="[object Proxy]",z="[object RegExp]",I="[object Set]",q="[object String]",G="[object Symbol]",X="[object Undefined]",L="[object WeakMap]",V="[object ArrayBuffer]",et="[object DataView]",U="[object Float32Array]",d="[object Float64Array]",w="[object Int8Array]",g="[object Int16Array]",$="[object Int32Array]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",O="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,tt=/^(?:0|[1-9]\d*)$/,k={};k[U]=k[d]=k[w]=k[g]=k[$]=k[S]=k[A]=k[C]=k[O]=!0,k[u]=k[c]=k[V]=k[f]=k[et]=k[m]=k[p]=k[y]=k[P]=k[R]=k[D]=k[z]=k[I]=k[q]=k[L]=!1;var ct=typeof Le=="object"&&Le&&Le.Object===Object&&Le,nt=typeof self=="object"&&self&&self.Object===Object&&self,rt=ct||nt||Function("return this")(),Jt=e&&!e.nodeType&&e,Yn=Jt&&!0&&t&&!t.nodeType&&t,Wn=Yn&&Yn.exports===Jt,fn=Wn&&ct.process,jn=function(){try{return fn&&fn.binding&&fn.binding("util")}catch{}}(),Kn=jn&&jn.isTypedArray;function Li(a,l){for(var v=-1,T=a==null?0:a.length,Y=0,M=[];++v<T;){var J=a[v];l(J,v,a)&&(M[Y++]=J)}return M}function Di(a,l){for(var v=-1,T=l.length,Y=a.length;++v<T;)a[Y+v]=l[v];return a}function Ri(a,l){for(var v=-1,T=a==null?0:a.length;++v<T;)if(l(a[v],v,a))return!0;return!1}function qi(a,l){for(var v=-1,T=Array(a);++v<a;)T[v]=l(v);return T}function Bi(a){return function(l){return a(l)}}function Fi(a,l){return a.has(l)}function Hi(a,l){return a==null?void 0:a[l]}function Ui(a){var l=-1,v=Array(a.size);return a.forEach(function(T,Y){v[++l]=[Y,T]}),v}function Gi(a,l){return function(v){return a(l(v))}}function Xi(a){var l=-1,v=Array(a.size);return a.forEach(function(T){v[++l]=T}),v}var Vi=Array.prototype,Qi=Function.prototype,Ae=Object.prototype,hn=rt["__core-js_shared__"],Zn=Qi.toString,xt=Ae.hasOwnProperty,Jn=function(){var a=/[^.]+$/.exec(hn&&hn.keys&&hn.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),tr=Ae.toString,Yi=RegExp("^"+Zn.call(xt).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=Wn?rt.Buffer:void 0,Ce=rt.Symbol,nr=rt.Uint8Array,rr=Ae.propertyIsEnumerable,Wi=Vi.splice,qt=Ce?Ce.toStringTag:void 0,ir=Object.getOwnPropertySymbols,ji=er?er.isBuffer:void 0,Ki=Gi(Object.keys,Object),dn=te(rt,"DataView"),ce=te(rt,"Map"),gn=te(rt,"Promise"),pn=te(rt,"Set"),mn=te(rt,"WeakMap"),fe=te(Object,"create"),Zi=Ht(dn),Ji=Ht(ce),ta=Ht(gn),ea=Ht(pn),na=Ht(mn),ar=Ce?Ce.prototype:void 0,vn=ar?ar.valueOf:void 0;function Bt(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var T=a[l];this.set(T[0],T[1])}}function ra(){this.__data__=fe?fe(null):{},this.size=0}function ia(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function aa(a){var l=this.__data__;if(fe){var v=l[a];return v===r?void 0:v}return xt.call(l,a)?l[a]:void 0}function sa(a){var l=this.__data__;return fe?l[a]!==void 0:xt.call(l,a)}function oa(a,l){var v=this.__data__;return this.size+=this.has(a)?0:1,v[a]=fe&&l===void 0?r:l,this}Bt.prototype.clear=ra,Bt.prototype.delete=ia,Bt.prototype.get=aa,Bt.prototype.has=sa,Bt.prototype.set=oa;function Pt(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var T=a[l];this.set(T[0],T[1])}}function ua(){this.__data__=[],this.size=0}function la(a){var l=this.__data__,v=ze(l,a);if(v<0)return!1;var T=l.length-1;return v==T?l.pop():Wi.call(l,v,1),--this.size,!0}function ca(a){var l=this.__data__,v=ze(l,a);return v<0?void 0:l[v][1]}function fa(a){return ze(this.__data__,a)>-1}function ha(a,l){var v=this.__data__,T=ze(v,a);return T<0?(++this.size,v.push([a,l])):v[T][1]=l,this}Pt.prototype.clear=ua,Pt.prototype.delete=la,Pt.prototype.get=ca,Pt.prototype.has=fa,Pt.prototype.set=ha;function Ft(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var T=a[l];this.set(T[0],T[1])}}function da(){this.size=0,this.__data__={hash:new Bt,map:new(ce||Pt),string:new Bt}}function ga(a){var l=Ie(this,a).delete(a);return this.size-=l?1:0,l}function pa(a){return Ie(this,a).get(a)}function ma(a){return Ie(this,a).has(a)}function va(a,l){var v=Ie(this,a),T=v.size;return v.set(a,l),this.size+=v.size==T?0:1,this}Ft.prototype.clear=da,Ft.prototype.delete=ga,Ft.prototype.get=pa,Ft.prototype.has=ma,Ft.prototype.set=va;function Ne(a){var l=-1,v=a==null?0:a.length;for(this.__data__=new Ft;++l<v;)this.add(a[l])}function _a(a){return this.__data__.set(a,r),this}function ya(a){return this.__data__.has(a)}Ne.prototype.add=Ne.prototype.push=_a,Ne.prototype.has=ya;function Ot(a){var l=this.__data__=new Pt(a);this.size=l.size}function wa(){this.__data__=new Pt,this.size=0}function xa(a){var l=this.__data__,v=l.delete(a);return this.size=l.size,v}function ba(a){return this.__data__.get(a)}function $a(a){return this.__data__.has(a)}function Ta(a,l){var v=this.__data__;if(v instanceof Pt){var T=v.__data__;if(!ce||T.length<n-1)return T.push([a,l]),this.size=++v.size,this;v=this.__data__=new Ft(T)}return v.set(a,l),this.size=v.size,this}Ot.prototype.clear=wa,Ot.prototype.delete=xa,Ot.prototype.get=ba,Ot.prototype.has=$a,Ot.prototype.set=Ta;function Pa(a,l){var v=Oe(a),T=!v&&Ba(a),Y=!v&&!T&&_n(a),M=!v&&!T&&!Y&&gr(a),J=v||T||Y||M,it=J?qi(a.length,String):[],st=it.length;for(var Z in a)xt.call(a,Z)&&!(J&&(Z=="length"||Y&&(Z=="offset"||Z=="parent")||M&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||Ma(Z,st)))&&it.push(Z);return it}function ze(a,l){for(var v=a.length;v--;)if(cr(a[v][0],l))return v;return-1}function Sa(a,l,v){var T=l(a);return Oe(a)?T:Di(T,v(a))}function he(a){return a==null?a===void 0?X:b:qt&&qt in Object(a)?Oa(a):qa(a)}function sr(a){return de(a)&&he(a)==u}function or(a,l,v,T,Y){return a===l?!0:a==null||l==null||!de(a)&&!de(l)?a!==a&&l!==l:Ea(a,l,v,T,or,Y)}function Ea(a,l,v,T,Y,M){var J=Oe(a),it=Oe(l),st=J?c:kt(a),Z=it?c:kt(l);st=st==u?D:st,Z=Z==u?D:Z;var ht=st==D,_t=Z==D,ut=st==Z;if(ut&&_n(a)){if(!_n(l))return!1;J=!0,ht=!1}if(ut&&!ht)return M||(M=new Ot),J||gr(a)?ur(a,l,v,T,Y,M):za(a,l,st,v,T,Y,M);if(!(v&i)){var gt=ht&&xt.call(a,"__wrapped__"),pt=_t&&xt.call(l,"__wrapped__");if(gt||pt){var Mt=gt?a.value():a,St=pt?l.value():l;return M||(M=new Ot),Y(Mt,St,v,T,M)}}return ut?(M||(M=new Ot),Ia(a,l,v,T,Y,M)):!1}function Aa(a){if(!dr(a)||Da(a))return!1;var l=fr(a)?Yi:K;return l.test(Ht(a))}function Ca(a){return de(a)&&hr(a.length)&&!!k[he(a)]}function Na(a){if(!Ra(a))return Ki(a);var l=[];for(var v in Object(a))xt.call(a,v)&&v!="constructor"&&l.push(v);return l}function ur(a,l,v,T,Y,M){var J=v&i,it=a.length,st=l.length;if(it!=st&&!(J&&st>it))return!1;var Z=M.get(a);if(Z&&M.get(l))return Z==l;var ht=-1,_t=!0,ut=v&s?new Ne:void 0;for(M.set(a,l),M.set(l,a);++ht<it;){var gt=a[ht],pt=l[ht];if(T)var Mt=J?T(pt,gt,ht,l,a,M):T(gt,pt,ht,a,l,M);if(Mt!==void 0){if(Mt)continue;_t=!1;break}if(ut){if(!Ri(l,function(St,Ut){if(!Fi(ut,Ut)&&(gt===St||Y(gt,St,v,T,M)))return ut.push(Ut)})){_t=!1;break}}else if(!(gt===pt||Y(gt,pt,v,T,M))){_t=!1;break}}return M.delete(a),M.delete(l),_t}function za(a,l,v,T,Y,M,J){switch(v){case et:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case V:return!(a.byteLength!=l.byteLength||!M(new nr(a),new nr(l)));case f:case m:case R:return cr(+a,+l);case p:return a.name==l.name&&a.message==l.message;case z:case q:return a==l+"";case P:var it=Ui;case I:var st=T&i;if(it||(it=Xi),a.size!=l.size&&!st)return!1;var Z=J.get(a);if(Z)return Z==l;T|=s,J.set(a,l);var ht=ur(it(a),it(l),T,Y,M,J);return J.delete(a),ht;case G:if(vn)return vn.call(a)==vn.call(l)}return!1}function Ia(a,l,v,T,Y,M){var J=v&i,it=lr(a),st=it.length,Z=lr(l),ht=Z.length;if(st!=ht&&!J)return!1;for(var _t=st;_t--;){var ut=it[_t];if(!(J?ut in l:xt.call(l,ut)))return!1}var gt=M.get(a);if(gt&&M.get(l))return gt==l;var pt=!0;M.set(a,l),M.set(l,a);for(var Mt=J;++_t<st;){ut=it[_t];var St=a[ut],Ut=l[ut];if(T)var pr=J?T(Ut,St,ut,l,a,M):T(St,Ut,ut,a,l,M);if(!(pr===void 0?St===Ut||Y(St,Ut,v,T,M):pr)){pt=!1;break}Mt||(Mt=ut=="constructor")}if(pt&&!Mt){var ke=a.constructor,Me=l.constructor;ke!=Me&&"constructor"in a&&"constructor"in l&&!(typeof ke=="function"&&ke instanceof ke&&typeof Me=="function"&&Me instanceof Me)&&(pt=!1)}return M.delete(a),M.delete(l),pt}function lr(a){return Sa(a,Ua,ka)}function Ie(a,l){var v=a.__data__;return La(l)?v[typeof l=="string"?"string":"hash"]:v.map}function te(a,l){var v=Hi(a,l);return Aa(v)?v:void 0}function Oa(a){var l=xt.call(a,qt),v=a[qt];try{a[qt]=void 0;var T=!0}catch{}var Y=tr.call(a);return T&&(l?a[qt]=v:delete a[qt]),Y}var ka=ir?function(a){return a==null?[]:(a=Object(a),Li(ir(a),function(l){return rr.call(a,l)}))}:Ga,kt=he;(dn&&kt(new dn(new ArrayBuffer(1)))!=et||ce&&kt(new ce)!=P||gn&&kt(gn.resolve())!=B||pn&&kt(new pn)!=I||mn&&kt(new mn)!=L)&&(kt=function(a){var l=he(a),v=l==D?a.constructor:void 0,T=v?Ht(v):"";if(T)switch(T){case Zi:return et;case Ji:return P;case ta:return B;case ea:return I;case na:return L}return l});function Ma(a,l){return l=l??o,!!l&&(typeof a=="number"||tt.test(a))&&a>-1&&a%1==0&&a<l}function La(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function Da(a){return!!Jn&&Jn in a}function Ra(a){var l=a&&a.constructor,v=typeof l=="function"&&l.prototype||Ae;return a===v}function qa(a){return tr.call(a)}function Ht(a){if(a!=null){try{return Zn.call(a)}catch{}try{return a+""}catch{}}return""}function cr(a,l){return a===l||a!==a&&l!==l}var Ba=sr(function(){return arguments}())?sr:function(a){return de(a)&&xt.call(a,"callee")&&!rr.call(a,"callee")},Oe=Array.isArray;function Fa(a){return a!=null&&hr(a.length)&&!fr(a)}var _n=ji||Xa;function Ha(a,l){return or(a,l)}function fr(a){if(!dr(a))return!1;var l=he(a);return l==y||l==E||l==h||l==x}function hr(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=o}function dr(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function de(a){return a!=null&&typeof a=="object"}var gr=Kn?Bi(Kn):Ca;function Ua(a){return Fa(a)?Pa(a):Na(a)}function Ga(){return[]}function Xa(){return!1}t.exports=Ha})(rn,rn.exports);var bc=rn.exports;const Br=Es(bc);var $c=ot("<label> </label> <!>",1);function He(t,e){Kt(e,!0);const n=Vr(10);let r=zt(e,"class",3,"");Fr("field",{id:n});var i=$c(),s=ne(i);se(s,"id",`label-${n??""}`),se(s,"for",n);var o=j(s,!0);Q(s);var u=W(s,2);return jr(u,()=>e.children??Hr),Rt(()=>{Yt(s,1,`border-[1.99px] border-transparent font-bold text-gray-400 leading-6 text-sm select-none ${r()??""}`),Pe(o,e.label)}),at(t,i),Zt({id:n})}var Tc=ot('<div class="py-1 px-2 grid grid-cols-2 gap-1"><!> <!> <!> <!></div>'),Pc=ot('<div class="absolute top-0 right-0 w-72 flex flex-col gap-1 bg-gray-900/90 rounded-bl-lg overflow-hidden"><!> <button class="w-full leading-6 py-0.5 text-gray-300 bg-transparent hover:bg-gray-300/5 active:bg-black/5 transition-colors"> </button></div>');function Sc(t,e){Kt(e,!1);let n=zt(e,"visParameters",12),r=H(!1);const i=Wr(),s=()=>{i("submit",n())};le();var o=Pc(),u=j(o);{var c=m=>{var p=Tc(),y=j(p);He(y,{label:"Layout",children:(b,D)=>{Sn(b,{options:ui,get value(){return n().graphDirection},set value(B){n(n().graphDirection=B,!0)},$$events:{change:s},$$legacy:!0})},$$slots:{default:!0}});var E=W(y,2);He(E,{label:"Shortcuts",children:(b,D)=>{Sn(b,{options:oi,get value(){return n().shortcutsMode},set value(B){n(n().shortcutsMode=B,!0)},$$events:{change:s},$$legacy:!0})},$$slots:{default:!0}});var P=W(E,2);He(P,{label:"Shortcuts color",children:(b,D)=>{ds(b,{placement:"bottom-end",get value(){return n().shortcutsColor},set value(B){n(n().shortcutsColor=B,!0)},$$events:{change:s},$$legacy:!0})},$$slots:{default:!0}});var R=W(P,2);He(R,{label:"Shortcuts width",children:(b,D)=>{Qr(b,{required:!0,get value(){return n().shortcutsWidth},set value(B){n(n().shortcutsWidth=B,!0)},$$events:{change:s},$$legacy:!0})},$$slots:{default:!0}}),Q(p),at(m,p)};Qt(u,m=>{_(r)&&m(c)})}var h=W(u,2),f=j(h,!0);Q(h),Q(o),Rt(()=>Pe(f,_(r)?"Collapse":"Show visualization settings")),Ye("click",h,()=>{N(r,!_(r))}),at(t,o),Zt()}var Ec=ot("<!> <!>",1),Ac=ot('<div class="grow overflow-y-auto flex items-center h-screen"><div class="max-w-xl mx-auto w-auto p-4"><!></div></div>'),Cc=ot('<div class="h-screen max-h-screen md:flex"><button><!></button> <div role="button" aria-label="Close menu" tabindex="0"></div> <div><a class="block bg-indigo-700 text-indigo-100 text-xl p-3">Wikidata Graph Builder</a> <div class="px-2 py-2"><!></div></div> <div class="md:grow overflow-auto relative h-full"><!></div></div>');function Uc(t,e){Kt(e,!1);const[n,r]=Xr(),i=()=>Xt(bs,"$page",n);let s=H(void 0),o=H(!1),u=H(wr()),c=H(void 0),h=H(_(u).visParameters);const f=L=>{Br(_(c),L.queryParameters)||N(c,L.queryParameters),Br(_(h),L.visParameters)||N(h,L.visParameters)},m=i().url.origin+i().url.pathname,p=async L=>{N(o,!1),await xr(L.detail,_(u).visParameters,!1)},y=async L=>{await xr(_(u).queryParameters,L.detail,!0)};mt(()=>i(),()=>{N(u,wr(i().url.searchParams))}),mt(()=>_(u),()=>{f(_(u))}),mt(()=>_(c),()=>{N(s,Jr(_(c)))}),Dn(),le();var E=Cc();Za(L=>{Ka.title="Wikidata Graph Builder"});var P=j(E),R=j(P);Yr(R,{path:gs,class:"w-12 h-12 fill-white/80"}),Q(P);var b=W(P,2),D=W(b,2),B=j(D);se(B,"href",m);var x=W(B,2),z=j(x);Ms(z,{get appParameters(){return _(u)},$$events:{submit:p}}),Q(x),Q(D);var I=W(D,2),q=j(I);{var G=L=>{var V=Ec(),et=ne(V);_c(et,{get query(){return _(s)},get rootNode(){return _(u).queryParameters.item},get visParameters(){return _(u).visParameters}});var U=W(et,2);Sc(U,{get visParameters(){return _(h)},$$events:{submit:y}}),at(L,V)},X=L=>{var V=Ac(),et=j(V),U=j(et);xc(U,{}),Q(et),Q(V),at(L,V)};Qt(q,L=>{_(s)?L(G):L(X,!1)})}Q(I),Q(E),Rt(()=>{Yt(P,1,`absolute top-6 left-0 bg-gray-800/90 w-16 h-16 md:hidden
        flex items-center justify-center rounded-r-lg z-10
        ${(_(o)?"hidden":"")??""}`),Yt(b,1,`absolute inset-0 bg-gray-900/80 md:hidden z-10
        ${(_(o)?"":"hidden")??""}`),Yt(D,1,`w-72 flex-none shadow-lg bg-gray-800/90 md:bg-gray-800 overflow-y-auto absolute left-0 top-0 bottom-0 md:static
        ${(_(o)?"translate-x-0 shadow-gray-900":"transition-transform -translate-x-full")??""}
        md:transform-none transition-transform md:shadow-gray-900 z-10 md:z-auto
        `)}),Ye("click",P,()=>{N(o,!_(o))}),Ye("click",b,()=>{N(o,!1)}),at(t,E),Zt(),r()}export{Uc as _,Ir as a,Hu as b,Pi as c,be as d,on as e,Le as f,Es as g,Lt as i,zi as t};
